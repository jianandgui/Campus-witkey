<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="weike.dao.StudentDao">

    <!--根据用户名查询学生信息 用于注册-->
    <select id="selectStudent" resultType="weike.entity.persistence.StudentInfo" parameterType="String">

        SELECT * FROM
        StudentRegisterInfo
        WHERE
        username=#{username}
    </select>

    <select id="queryEmail" parameterType="String" resultType="weike.entity.persistence.StudentInfo">

        SELECT * FROM
        StudentRegisterInfo
        WHERE
        email=#{email}
    </select>

    <!--添加一个学生信息-->
    <insert id="studentAddPersonal" parameterType="weike.entity.persistence.StudentDetail" >

    INSERT INTO StudentDetailInfo
    (username,
    image,
    sex,
    eduBackgroud,
    university,
    majorAndGrade,
    entryUniversity,
    leaveUniversity,
    qq,
    skills,
    experience,
    selfFeel,
    level)
    VALUES
    (#{username},
    #{image},
    #{sex},
    #{eduBackgroud},
    #{university},
    #{majorAndGrade},
    #{entryUniversity},
    #{leaveUniversity},
    #{qq},
    #{skills},
    #{experience},
    #{selfFeel},
    #{level})
    </insert>

<insert id="studntRegister" parameterType="weike.entity.persistence.StudentInfo">
INSERT INTO StudentRegisterInfo
    (username,
    password,
    email,
    lastPasswordResetDate,
    role)
    VALUES
    (#{username},
    #{password},
    #{email},
    #{lastPasswordResetDate},
    #{role})


</insert>


<select id="queryForStudentPhone" parameterType="String" resultType="weike.entity.persistence.StudentDetail">

    SELECT * FROM StudentDetailInfo
    WHERE
    username=#{username}
</select>

<update id="updatePassword" parameterType="String">

    UPDATE StudentRegisterInfo
    SET password=#{password}
    WHERE
    username=#{username}
</update>

<select id="queryAllRecommod" parameterType="String" resultType="weike.entity.view.ProjectRecommod">

    SELECT
    username,
    image,
    sex,
    university,
    majorAndGrade,
    experience,
    skills,
    qq
    FROM
    StudentDetailInfo
    WHERE
    skills like "%"#{skills}"%"

</select>



</mapper>